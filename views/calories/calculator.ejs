<% layout('layouts/boilerplate') %>

<div class="container my-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header text-center">
                    <h2 class="mb-0">ðŸ“Š Calorie Maintenance Calculator</h2>
                    <p class="text-muted mt-2">Calculate your daily calorie needs for different fitness goals</p>
                </div>
                <div class="card-body">
                    <%- include('../partials/alerts') %>
                    
                    <form action="/calories/calculate" method="POST" id="calorieForm">
                        <div class="row">
                            <!-- Basic Information -->
                            <div class="col-md-6">
                                <h5 class="text-success mb-3">Basic Information</h5>
                                
                                <div class="mb-3">
                                    <label for="age" class="form-label">Age (years)</label>
                                    <input type="number" class="form-control" id="age" name="age" 
                                           min="13" max="120" required
                                           value="<%= profile ? profile.age : '' %>"
                                           placeholder="25">
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Gender</label>
                                    <div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="gender" id="male" value="male"
                                                   <%= profile && profile.gender === 'male' ? 'checked' : '' %> required>
                                            <label class="form-check-label" for="male">Male</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="gender" id="female" value="female"
                                                   <%= profile && profile.gender === 'female' ? 'checked' : '' %> required>
                                            <label class="form-check-label" for="female">Female</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Physical Measurements -->
                            <div class="col-md-6">
                                <h5 class="text-success mb-3"> Physical Measurements</h5>
                                
                                <div class="mb-3">
                                    <label for="height" class="form-label">Height (cm)</label>
                                    <input type="number" class="form-control" id="height" name="height" 
                                           min="100" max="250" step="0.1" required
                                           value="<%= profile ? profile.height : '' %>"
                                           placeholder="175">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="weight" class="form-label  ">Weight (kg)</label>
                                    <input type="number" class="form-control" id="weight" name="weight" 
                                           min="30" max="300" step="0.1" required
                                           value="<%= profile ? profile.weight : '' %>"
                                           placeholder="70">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Activity Level -->
                        <div class="row">
                            <div class="col-12">
                                <h5 class="text-success mb-3">  Activity Level</h5>
                                <div class="activity-selection">
                                    <div class="mb-3">
                                        <div class="form-check activity-option">
                                            <input class="form-check-input" type="radio" name="activityLevel" id="sedentary" value="sedentary"
                                                   <%= profile && profile.activityLevel === 'sedentary' ? 'checked' : '' %> required>
                                            <label class="form-check-label" for="sedentary">
                                                <strong>Sedentary (1.2x)</strong><br>
                                                <small class="text-muted">Little or no exercise, desk job</small>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check activity-option">
                                            <input class="form-check-input" type="radio" name="activityLevel" id="lightly_active" value="lightly_active"
                                                   <%= profile && profile.activityLevel === 'lightly_active' ? 'checked' : '' %> required>
                                            <label class="form-check-label" for="lightly_active">
                                                <strong>Lightly Active (1.375x)</strong><br>
                                                <small class="text-muted">Light exercise/sports 1-3 days/week</small>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check activity-option">
                                            <input class="form-check-input" type="radio" name="activityLevel" id="moderately_active" value="moderately_active"
                                                   <%= profile && profile.activityLevel === 'moderately_active' ? 'checked' : '' %> required>
                                            <label class="form-check-label" for="moderately_active">
                                                <strong>Moderately Active (1.55x)</strong><br>
                                                <small class="text-muted">Moderate exercise/sports 3-5 days/week</small>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check activity-option">
                                            <input class="form-check-input" type="radio" name="activityLevel" id="very_active" value="very_active"
                                                   <%= profile && profile.activityLevel === 'very_active' ? 'checked' : '' %> required>
                                            <label class="form-check-label" for="very_active">
                                                <strong>Very Active (1.725x)</strong><br>
                                                <small class="text-muted">Hard exercise/sports 6-7 days a week</small>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check activity-option">
                                            <input class="form-check-input" type="radio" name="activityLevel" id="extra_active" value="extra_active"
                                                   <%= profile && profile.activityLevel === 'extra_active' ? 'checked' : '' %> required>
                                            <label class="form-check-label text-s" for="extra_active">
                                                <strong>Extra Active (1.9x)</strong><br>
                                                <small class="text-muted">Very hard exercise/sports + physical job or 2x training</small>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                            <button type="submit" class="btn border-none btn-lg px-5">
                                Calculate My Calories
                            </button>
                            <% if (profile) { %>
                                <a href="/calories/results" class="btn border-none   btn-lg">
                                    View Last Results
                                </a>
                            <% } %>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Information Section -->
            <div class="card mt-4">
                <div class="card-body">
                    <h5 class="text-success mb-3">How It Works</h5>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="text-center mb-3">
                                <div class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center" 
                                     style="width: 50px; height: 50px;">
                                    <strong>1</strong>
                                </div>
                                <h6 class="mt-2">Calculate BMR</h6>
                                <small class="text-muted">Your body's basic energy needs using the proven Mifflin-St Jeor equation</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center mb-3">
                                <div class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center" 
                                     style="width: 50px; height: 50px;">
                                    <strong>2</strong>
                                </div>
                                <h6 class="mt-2">Apply Activity</h6>
                                <small class="text-muted">Multiply by your activity level to get Total Daily Energy Expenditure (TDEE)</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center mb-3">
                                <div class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center" 
                                     style="width: 50px; height: 50px;">
                                    <strong>3</strong>
                                </div>
                                <h6 class="mt-2">Set Goals</h6>
                                <small class="text-muted">Get calories for maintenance, weight loss, or muscle gain</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.activity-option {
    padding: 12px;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    transition: all 0.2s ease;
}

.activity-option:hover {
    background-color: #f8f9fa;
    border-color: #6c757d;
}
.activity-option input[type="radio"]{
    display: none;
}
    
.activity-option input[type="radio"]:checked + label {
    color: #198754;
}

.activity-option:has(input[type="radio"]:checked) {
    background-color: #d1e7dd;
    border-color: #198754;
}

.activity-option:has(input[type="radio"]:checked) {
    background-color: #e7f1ff;
    border-color: #198754;
}
</style>